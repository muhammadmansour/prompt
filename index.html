<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Framework Requirements Selector</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <div class="logo">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
          <rect width="32" height="32" rx="8" fill="url(#gradient)"/>
          <path d="M10 16L14 20L22 12" stroke="white" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
          <defs>
            <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32">
              <stop stop-color="#0EA5E9"/>
              <stop offset="1" stop-color="#6366F1"/>
            </linearGradient>
          </defs>
        </svg>
      </div>
      <h1>Framework Requirements</h1>
      <p class="subtitle">Select multiple framework requirements to analyze</p>
    </header>

    <main class="main-content">
      <!-- Framework Multi-Select -->
      <div class="form-group">
        <label for="framework-search">
          <span class="label-text">Framework & Requirements</span>
          <span class="label-hint">Select multiple compliance framework requirements</span>
        </label>
        
        <!-- Selected Tags Display -->
        <div class="selected-tags" id="selected-tags">
          <span class="placeholder-text" id="tags-placeholder">No requirements selected</span>
        </div>
        
        <!-- Search and Filter -->
        <div class="multiselect-container" id="multiselect-container">
          <div class="multiselect-header">
            <div class="search-wrapper">
              <svg class="search-icon" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="8" cy="8" r="5.5" stroke="currentColor" stroke-width="1.5"/>
                <path d="M12 12L16 16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
              <input 
                type="text" 
                id="framework-search" 
                placeholder="Search frameworks and requirements..."
                autocomplete="off"
              />
              <button type="button" class="clear-search hidden" id="clear-search" aria-label="Clear search">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
              </button>
            </div>
            <div class="multiselect-actions">
              <button type="button" class="btn-select-action" id="btn-select-all" title="Select all visible">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <rect x="2" y="2" width="12" height="12" rx="2" stroke="currentColor" stroke-width="1.5"/>
                  <path d="M5 8L7 10L11 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                All
              </button>
              <button type="button" class="btn-select-action" id="btn-clear-all" title="Clear selection">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <rect x="2" y="2" width="12" height="12" rx="2" stroke="currentColor" stroke-width="1.5"/>
                </svg>
                Clear
              </button>
            </div>
          </div>
          
          <!-- Options List -->
          <div class="multiselect-options" id="multiselect-options">
            <div class="loading-state">
              <svg class="spinner" width="24" height="24" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" stroke-opacity="0.2"/>
                <path d="M12 2C17.5 2 22 6.5 22 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
              <span>Loading frameworks...</span>
            </div>
          </div>
          
          <!-- Selection Counter -->
          <div class="multiselect-footer">
            <span class="selection-count"><span id="selection-count">0</span> requirements selected</span>
            <span class="visible-count"><span id="visible-count">0</span> shown</span>
          </div>
        </div>
      </div>

      <!-- User Prompt Textarea -->
      <div class="form-group">
        <label for="notes-textarea">
          <span class="label-text">Your Context / Prompt</span>
          <span class="label-hint">Describe your situation or ask specific questions about the requirement</span>
        </label>
        <textarea 
          id="notes-textarea" 
          placeholder="e.g., We are a government agency implementing a new digital service. What evidence do we need to demonstrate compliance with this requirement?"
          rows="5"
        ></textarea>
        <div class="textarea-footer">
          <span class="char-count"><span id="char-count">0</span> characters</span>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="btn-group">
        <button type="button" class="btn btn-primary" id="btn-analyze" disabled>
          <svg class="btn-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M10 2V4M10 16V18M4 10H2M18 10H16M5.05 5.05L3.63 3.63M16.37 16.37L14.95 14.95M5.05 14.95L3.63 16.37M16.37 3.63L14.95 5.05" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <circle cx="10" cy="10" r="4" stroke="currentColor" stroke-width="1.5"/>
          </svg>
          <span class="btn-text">Analyze with AI</span>
          <span class="btn-loading hidden">
            <svg class="spinner" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2" stroke-opacity="0.3"/>
              <path d="M10 2C14.4 2 18 5.6 18 10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            Analyzing...
          </span>
        </button>
        
        <button type="button" class="btn btn-secondary" id="btn-submit" disabled>
          <svg class="btn-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 10L9 16L17 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="btn-text">Submit</span>
          <span class="btn-loading hidden">
            <svg class="spinner" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="2" stroke-opacity="0.3"/>
              <path d="M10 2C14.4 2 18 5.6 18 10" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            Submitting...
          </span>
        </button>
      </div>

      <!-- Selected Info Panel -->
      <div class="selected-info" id="selected-info" style="display: none;">
        <div class="info-header">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="10" cy="10" r="8" stroke="currentColor" stroke-width="1.5"/>
            <path d="M10 9V14M10 6.5V7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          <span>Selected Requirements (<span id="info-count">0</span>)</span>
        </div>
        <div class="info-content" id="info-content">
          <!-- Dynamic list of selected requirements will be rendered here -->
        </div>
      </div>
    </main>

  </div>

  <!-- Modal Overlay -->
  <div class="modal-overlay" id="modal-overlay">
    <div class="modal" id="modal">
      <div class="modal-header">
        <div class="modal-title">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>AI Analysis Results</span>
        </div>
        <button type="button" class="modal-close" id="modal-close" aria-label="Close modal">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
      <div class="modal-body" id="modal-body">
        <!-- Content will be injected here -->
      </div>
      <div class="modal-footer" id="modal-footer">
        <button type="button" class="btn btn-ghost" id="modal-cancel">
          Cancel
        </button>
        <button type="button" class="btn btn-confirm" id="modal-confirm">
          <svg class="btn-icon" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M3 9L7 13L15 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span class="btn-text">Confirm</span>
          <span class="btn-loading hidden">
            <svg class="spinner" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
              <circle cx="9" cy="9" r="7" stroke="currentColor" stroke-width="2" stroke-opacity="0.3"/>
              <path d="M9 2C13 2 16 5 16 9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            Saving...
          </span>
        </button>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toast-container"></div>

  <div class="background-pattern"></div>

  <script src="app.js"></script>
</body>
</html>
